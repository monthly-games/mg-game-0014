# Witch's Lab: Experimental Puzzle - 프로덕션 디자인 문서

> game_id: game_0014
> repo: mg-game-0014
> title_kr: 마녀의 연구소: 실험형 퍼즐
> title_en: Witch's Lab: Experimental Puzzle
> genre_tags: puzzle, skill_build, roguelike
> doc_type: production_design
> source_of_truth: docs/design/gdd_game_0014.json
> last_updated: 2025-12-19

---

## 1. 재미 요소 (Fun Factors)

### 1.1 핵심 재미 (Core Fun)
| 요소 | 설명 | 강도 |
|------|------|------|
| **스킬 빌드** | 매 판마다 다른 스킬 조합 발견 | ★★★★★ |
| **시너지 발견** | 스킬 조합으로 강력한 효과 발동 | ★★★★★ |
| **퍼즐 전략** | 패턴 매칭을 통한 재료 수집 | ★★★★☆ |
| **로그라이크** | 반복 플레이마다 다른 경험 | ★★★★☆ |

### 1.2 만족감 요소 (Satisfaction)
- **시너지 발동**: 스킬 조합 시너지 효과 발동
- **실험 성공**: 실험(런) 완료 시 성취감
- **신규 발견**: 새로운 스킬/시너지 발견
- **영구 성장**: 메타 업그레이드로 강해지는 느낌

### 1.3 도전 요소 (Challenge)
```
도전 구조:
├── 랜덤 스킬 제시에서 최적 빌드 구성
├── 제한된 슬롯에서 시너지 완성
├── 점점 어려워지는 실험 단계
├── 보스 스테이지 (특수 패턴)
└── 일일 챌린지 (고정 시드)
```

### 1.4 사회적 요소 (Social)
- **일일 챌린지**: 같은 시드로 점수 경쟁
- **리더보드**: 최고 기록 랭킹
- **빌드 공유**: 성공 빌드 공유
- **도전과제 비교**: 친구와 업적 비교

---

## 2. 게임 루프 (Game Loop)

### 2.1 코어 루프 (1~2분) - 한 스테이지
```
┌─────────────────────────────────────────────────┐
│                    코어 루프                      │
├─────────────────────────────────────────────────┤
│  [퍼즐 매칭] → [재료 수집] → [스킬 사용]          │
│       ↑                            ↓             │
│       └──── [스테이지 진행] ← [적 처치] ←┘       │
└─────────────────────────────────────────────────┘
```

### 2.2 세션 루프 (15~20분) - 한 실험(런)
```
[실험 시작] → [스킬 선택] → [퍼즐 스테이지] → [보스] → [실험 결과]
                   ↓                              ↓
          [시너지 활성화]                  [영구 보상 획득]
```

**세션 구성:**
- 실험 시작/마녀 선택: 30초
- 스테이지 5~10개: 10~15분
- 스킬 선택 (스테이지 간): 각 15~30초
- 실험 종료/결과: 30초

### 2.3 메타 루프 (장기)
```
┌──────────────────────────────────────────────────────┐
│                     메타 진행                         │
├──────────────────────────────────────────────────────┤
│  [실험 완료] → [에센스 획득] → [영구 업그레이드]       │
│         ↓                              ↓             │
│  [새 스킬 해금]                  [마녀 레벨업]         │
│         ↓                              ↓             │
│  [더 어려운 실험] ←───────────────────┘              │
└──────────────────────────────────────────────────────┘
```

### 2.4 플로우 다이어그램
```
[앱 시작]
    ↓
[메인 메뉴] ─────→ [마녀 선택]
    │              [스킬 도감]
    │              [영구 업그레이드]
    │              [설정]
    ↓
[실험 시작] → [스킬 선택] → [퍼즐 스테이지]
                               ↓
                          [스테이지 클리어]
                               ↓
                          [다음 스킬 선택]
                               ↓
                          [보스 or 종료]
```

---

## 3. BM 모델 (Business Model)

### 3.1 수익화 전략
| 채널 | 비중 | 설명 |
|------|------|------|
| **리워드 광고** | 45% | 재료 추가, 스킬 재선택 |
| **마녀 스킨** | 25% | 코스메틱 캐릭터 |
| **편의 기능** | 20% | 추가 슬롯, 재선택권 |
| **광고 제거** | 10% | 일회성 구매 |

### 3.2 과금 포인트
```
비과금 유저 경험:
├── 모든 실험 클리어 가능
├── 기본 마녀 2종 제공
├── 광고 시청으로 재선택 가능
└── 영구 업그레이드 완전 가능

과금 유저 혜택:
├── 광고 제거 ($3.99)
├── 마녀 스킨 팩 ($2.99~$4.99)
├── 크리스탈 패키지 ($0.99~$9.99)
├── 스타터 팩 ($4.99)
└── 슬롯 확장 ($1.99)
```

### 3.3 가격 정책
| 상품 | 가격 | 가치 |
|------|------|------|
| 소량 크리스탈 (100) | $0.99 | 재선택 5회 |
| 중량 크리스탈 (500) | $3.99 | 20% 보너스 |
| 대량 크리스탈 (1200) | $7.99 | 40% 보너스 |
| 광고 제거 | $3.99 | 영구 적용 |
| 마녀 팩 | $2.99~4.99 | 개별 마녀 |
| 스타터 팩 | $4.99 | 마녀 + 크리스탈 + 광고 제거 |

### 3.4 리텐션 메커니즘
- **일일 도전**: 매일 다른 시드의 특별 실험
- **일일 보상**: 로그인 보너스 에센스
- **주간 챌린지**: 특수 조건 클리어
- **시즌 이벤트**: 한정 마녀/스킬

---

## 4. 레벨 디자인 (Level Design)

### 4.1 난이도 곡선
```
난이도
  ▲
  │                         ╭── 보스
  │                    ╭────╯
  │               ╭────╯
  │          ╭────╯
  │     ╭────╯
  │╭────╯
  └──────────────────────────────────────→ 스테이지
    1   2   3   4   5   6   7   8   9  10
                        보스
```

**난이도 공식:**
```
적_체력 = 기본_체력 × (1 + 스테이지 × 0.2)
적_공격력 = 기본_공격력 × (1 + 스테이지 × 0.15)
퍼즐_복잡도 = 기본 + floor(스테이지 / 3)
```

### 4.2 콘텐츠 진행
| 실험 레벨 | 해금 조건 | 새로운 요소 |
|----------|----------|-------------|
| 초급 | 시작 | 기본 스킬 20종, 단순 퍼즐 |
| 중급 | 클리어 3회 | 고급 스킬, 시너지 해금 |
| 고급 | 클리어 10회 | 희귀 스킬, 복합 퍼즐 |
| 마스터 | 클리어 25회 | 전설 스킬, 보스 강화 |
| 전설 | 클리어 50회 | 무한 모드, 특수 시너지 |

### 4.3 밸런싱 공식
```dart
// 스킬 데미지 계산
int calculateSkillDamage(Skill skill, List<Skill> activeSkills) {
  int baseDamage = skill.power;
  double synergyBonus = getSynergyBonus(skill, activeSkills);
  return (baseDamage * (1 + synergyBonus)).toInt();
}

// 시너지 보너스
double getSynergyBonus(Skill skill, List<Skill> activeSkills) {
  // 예: 화염 마스터 시너지 (화염 스킬 3개)
  if (hasFireMasterySynergy(activeSkills)) {
    return skill.element == 'fire' ? 0.5 : 0;
  }
  return 0;
}

// 에센스 보상
int essenceReward(int stageReached, bool bossKilled) {
  return stageReached * 10 + (bossKilled ? 50 : 0);
}
```

### 4.4 보상 체계
| 보상 유형 | 획득 조건 | 수량 |
|-----------|----------|------|
| 실험 재료 | 퍼즐 매칭 | 매치당 1~3개 |
| 에센스 | 실험 종료 | 스테이지×10 |
| 스킬 해금 | 첫 클리어 | 새 스킬 1종 |
| 일일 보상 | 로그인 | 30~100 에센스 |
| 업적 보상 | 마일스톤 | 크리스탈/에센스 |

---

## 5. UI/UX 설계

### 5.1 정보 계층
```
레벨 1 (항상 표시):
├── 현재 HP
├── 스테이지 번호
├── 활성 스킬 (3~5개)
└── 활성 시너지

레벨 2 (상호작용 시):
├── 퍼즐 보드
├── 스킬 선택 화면
├── 적 정보
└── 시너지 상세

레벨 3 (팝업):
├── 스킬 획득
├── 시너지 발동
├── 실험 결과
└── 설정 메뉴
```

### 5.2 네비게이션 흐름
```
[메인 메뉴]
    ├── [실험 시작] → [마녀 선택] → [실험] → [결과]
    ├── [업그레이드] → [영구 업그레이드 목록]
    ├── [도감] → [스킬/시너지 도감]
    ├── [일일 도전] → [특별 실험]
    └── [설정] → [옵션]
```

### 5.3 피드백 시스템
| 이벤트 | 시각 | 청각 | 촉각 |
|--------|------|------|------|
| 퍼즐 매칭 | 매칭 이펙트 | 매칭음 | - |
| 스킬 발동 | 스킬 이펙트 | 스킬음 | 진동 (약) |
| 시너지 발동 | 시너지 연출 | 시너지음 | 진동 (중) |
| 레벨업 | 레벨업 연출 | 팡파레 | 진동 (중) |
| 실험 실패 | 페이드 아웃 | 실패음 | 진동 (강) |

### 5.4 접근성
- **힌트 시스템**: 퍼즐 힌트 옵션
- **시너지 가이드**: 조합 가능 시너지 표시
- **색맹 모드**: 속성별 패턴 추가
- **폰트 크기**: 3단계 조절
- **애니메이션 감소**: 시각 효과 옵션

---

## 6. 프로덕션 체크리스트

### 핵심 기능
- [x] 퍼즐 매칭 시스템 (GridManager: tile matching)
- [x] 스킬 빌드 시스템 (SkillManager: acquire/equip, 최대 6개 슬롯, 쿨다운)
- [x] 시너지 시스템 (SynergyManager: 8가지 효과, 데미지/마나/쿨다운/크리티컬/흡혈 등)
- [x] 로그라이크 런 구조 (DraftManager: 3선지 스킬 선택)
- [x] 영구 업그레이드 (MetaManager: ResearchPoints, HP/마나 보너스)

### 콘텐츠
- [ ] 50+ 스킬 (현재 Skills.getAllSkills())
- [x] 8+ 시너지 (damageBoost/manaCostReduction/cooldownReduction/criticalChance/lifeSteal/areaExpansion/dotAmplify/shieldOnKill)
- [ ] 5+ 마녀 캐릭터
- [ ] 10 실험 스테이지
- [x] 튜토리얼 (TutorialOverlay/TutorialManager)

### 메타 시스템
- [x] 에센스/업그레이드 (MetaManager: researchPoints, node purchase)
- [ ] 일일/주간 퀘스트
- [ ] 도전과제
- [ ] 일일 챌린지
- [ ] 리더보드

### 수익화
- [ ] 광고 SDK
- [ ] IAP 상품
- [ ] 상점 UI
- [ ] 재선택 시스템

### QA/최적화
- [ ] 밸런싱 테스트
- [ ] 시너지 검증
- [ ] 성능 최적화
- [ ] 크래시 리포팅

### 출시 준비
- [ ] 스토어 에셋
- [ ] 앱 설명
- [ ] 법적 문서
- [ ] 소프트 런칭

---

## 7. KPI 목표

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| D1 리텐션 | 40% | Firebase Analytics |
| D7 리텐션 | 16% | Firebase Analytics |
| D30 리텐션 | 6% | Firebase Analytics |
| 세션 길이 | 15분 | 평균 세션 시간 |
| 일일 세션 | 3회 | DAU / 세션 수 |
| 평균 런 시간 | 18분 | 런당 평균 시간 |
| ARPU | $0.12~0.18 | 총 매출 / DAU |
| 광고 시청률 | 50~60% | 광고 노출 / DAU |
| 결제 전환율 | 3~5% | 결제 유저 / DAU |

---

*마지막 업데이트: 2025-12-19*
